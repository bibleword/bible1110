<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <title>æ¯æ—¥åœ£ç»</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#FFFFFF">
    
    <style>
        /* --- åŸºç¡€æ ·å¼ --- */
        :root {
            --color-understand: #007bff;
            --color-prayer: #28a745;
            --color-connect: #6f42c1;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
            margin: 0;
            
            /* --- ğŸš© æ”¹åŠ¨ 1: ç§»é™¤ padding: 20px; è®¾ä¸º 0 --- */
            padding: 0;
            
            box-sizing: border-box;
            color: #333;

            /* --- ğŸš© æ”¹åŠ¨ 2: æ›´æ”¹èƒŒæ™¯æ¸å˜ä¸º ç™½ -> è“ -> ç™½ --- */
            background-image: linear-gradient(to bottom, #B0E0E6, #FFFFFF);
            
            background-attachment: fixed;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* --- é¡µé¢å¸ƒå±€ --- */
        .container {
            width: 100%;
            max-width: 600px;
            text-align: center;

            /* --- ğŸš© æ”¹åŠ¨ 3: å°† body çš„ padding ç§»åˆ°æ­¤å¤„ --- */
            padding: 20px;
            box-sizing: border-box;
        }

        h1#main-title {
            font-size: 2.2rem;
            
            /* --- ğŸš© æ”¹åŠ¨ 4: æ ‡é¢˜é¢œè‰²æ”¹ä¸ºæ·±è‰²ä»¥é€‚åº”ç™½è‰²èƒŒæ™¯ --- */
            color: #333;
            
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
            margin-top: 20px;
            margin-bottom: 5px;
        }

        #beijing-time {
            font-size: 0.9rem;
            
            /* --- ğŸš© æ”¹åŠ¨ 5: æ—¶é—´èƒŒæ™¯/å‰æ™¯è‰²è°ƒæ•´ --- */
            color: #555;
            background-color: rgba(255, 255, 255, 0.4);
            
            padding: 2px 8px;
            border-radius: 12px;
            display: inline-block;
            margin-bottom: 30px;
        }

        /* --- æ¯›ç»ç’ƒæ•ˆæœ --- */
        .glass-box {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px) saturate(180%);
            -webkit-backdrop-filter: blur(10px) saturate(180%);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        /* --- å†…å®¹åŒºåŸŸ --- */
        .content-card {
            padding: 25px;
            text-align: left;
            margin-bottom: 30px;
        }

        #bible-text {
            font-size: 1.2rem;
            line-height: 1.8;
            color: #000;
        }

        #bible-ref {
            font-size: 1rem;
            font-weight: bold;
            text-align: right;
            margin-top: 20px;
            color: #333;
        }

        /* --- æŒ‰é’®åŒºåŸŸ --- */
        .button-group {
            display: flex;
            justify-content: space-between;
        }

        .action-button {
            flex: 1;
            margin: 0 8px;
            padding: 12px;
            font-size: 1rem;
            font-weight: bold;
            border: none;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
        }

        #btn-understand { color: var(--color-understand); }
        #btn-prayer { color: var(--color-prayer); }
        #btn-connect { color: var(--color-connect); }

        /* --- å¼¹çª— Modal --- */
        .modal {
            display: none; /* é»˜è®¤éšè— */
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.5); /* åŠé€æ˜é®ç½© */
            animation: fadeIn 0.3s;
        }

        .modal-content {
            position: relative;
            background-color: #fefefe;
            margin: 15% auto;
            padding: 30px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            animation: slideIn 0.3s;
        }

        .close-btn {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close-btn:hover,
        .close-btn:focus {
            color: black;
        }

        #modal-title {
            margin-top: 0;
            font-size: 1.5rem;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        
        #modal-body {
            font-size: 1rem;
            line-height: 1.7;
            white-space: pre-wrap; /* ä¿ç•™æ¢è¡Œç¬¦ */
        }

        /* --- ğŸš© æ”¹åŠ¨ 6: æ–°å¢â€œäº¤æµâ€å¼¹çª—çš„æ ·å¼ --- */
        /* äº¤æµä¿¡æ¯æ ·å¼ */
        #modal-body p {
            margin: 10px 0;
        }
        
        /* ä¿®å¤â€œäº¤æµâ€å¼¹çª—é¡¶éƒ¨é—´è· */
        #modal-body.connect-modal p:first-child {
            margin-top: 0;
        }

        /* â€œäº¤æµâ€å¼¹çª—ç»“å°¾å¥æ ·å¼ */
        .connect-closing-line {
            text-align: center;
            color: #8a63d2; /* æ·¡ç´«è‰² */
            font-weight: bold;
            margin-top: 25px; /* é¡¶éƒ¨å¤šç•™ç‚¹ç©ºéš™ */
        }
        
        #modal-body a {
            color: #007bff;
            text-decoration: none;
        }
        #modal-body a:hover {
            text-decoration: underline;
        }
        /* --- ğŸš© æ”¹åŠ¨ 6 ç»“æŸ --- */


        /* åŠ¨ç”» */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

    </style>
</head>
<body>

    <div class="container">
        <h1 id="main-title">åŠ è½½ä¸­...</h1>
        
        <div id="beijing-time"></div>

        <div class="content-card glass-box">
            <p id="bible-text">åŠ è½½ä¸­...</p>
            <p id="bible-ref">åŠ è½½ä¸­...</p>
        </div>

        <div class="button-group">
            <button id="btn-understand" class="action-button glass-box">ç†è§£</button>
            <button id="btn-prayer" class="action-button glass-box">ç¥·å‘Š</button>
            <button id="btn-connect" class="action-button glass-box">äº¤æµ</button>
        </div>
    </div>

    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2 id="modal-title"></h2>
            <div id="modal-body"></div>
        </div>
    </div>

    <script>
        // --- PWA Service Worker æ³¨å†Œ ---
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => {
                        console.log('ServiceWorker æ³¨å†ŒæˆåŠŸ: ', registration.scope);
                    })
                    .catch(error => {
                        console.log('ServiceWorker æ³¨å†Œå¤±è´¥: ', error);
                    });
            });
        }

        // --- æ ¸å¿ƒæ•°æ® ---
        const dailyData = [
            // è¿™æ˜¯ç¬¬ 1 å¤© (dayOfYear = 1)
            { 
                title: "ä¸»é‡Œæ–°èº«ä»½", 
                text: "ä½ çœ‹çˆ¶èµç»™æˆ‘ä»¬æ˜¯ä½•ç­‰çš„æ…ˆçˆ±ï¼", 
                ref: "çº¦ç¿°ä¸€ä¹¦3ç« 1èŠ‚", 
                think: "â€œæˆ‘ä¸å†æ˜¯ä»å‰çš„æˆ‘äº†ï¼Œç°åœ¨çš„æˆ‘æ˜¯æ–°é€ çš„äººã€‚â€è¿™æ˜¯æˆ‘å„¿å­æ°å¤«åœ¨ä¸€æ¬¡å­¦æ ¡é›†ä¼šä¸Šï¼Œå‘å­¦ç”Ÿä»¬æè¿°ä¸Šå¸åœ¨ä»–ç”Ÿå‘½ä¸­çš„æ”¹å˜ã€‚\n\næ°å¤«æ›¾æ˜¯ä¸ªæµ·æ´›å› æˆç˜¾è€…ï¼Œä»–ä»å‰æ˜¯ä»¥æ‰€çŠ¯çš„ç½ªå’Œé”™è¯¯æ¥çœ‹å¾…è‡ªå·±ï¼Œä½†ç°åœ¨ä»–è§†è‡ªå·±ä¸ºä¸Šå¸çš„å„¿å¥³ã€‚\n\nåœ£ç»ä¹Ÿç”¨æ­¤åº”è®¸æ¥æ¿€åŠ±æˆ‘ä»¬...", 
                prayer: "äº²çˆ±çš„å¤©çˆ¶ï¼Œæ„Ÿè°¢ç¥¢å¦‚æ­¤çˆ±æˆ‘ï¼Œç”šè‡³ç§°æˆ‘ä¸ºç¥¢çš„å„¿å¥³ã€‚\næ±‚ç¥¢å¸®åŠ©æˆ‘ï¼Œæ´»å‡ºç¥¢å„¿å¥³çš„æ ·å¼ï¼Œèƒ½è£è€€ç¥¢çš„åã€‚" 
            },
            // è¿™æ˜¯ç¬¬ 2 å¤©
            { 
                title: "ç¬¬2å¤©æ ‡é¢˜", 
                text: "ç¬¬2å¤©åœ£ç»å†…å®¹...", 
                ref: "å‡ºå¤„", 
                think: "ç¬¬2å¤©â€œä»Šæ—¥ç†è§£â€çš„å†…å®¹ã€‚\nå¯ä»¥æ¢è¡Œã€‚", 
                prayer: "ç¬¬2å¤©â€œç¥·å‘ŠæŒ‡å¼•â€çš„å†…å®¹ã€‚\nä¹Ÿå¯ä»¥æ¢è¡Œã€‚" 
            },
            // ... [æ­¤å¤„çœç•¥å…¶ä»–æ•°æ®] ...
            // è¿™æ˜¯ç¬¬ 10 å¤©
            { 
                title: "ç¬¬10å¤©æ ‡é¢˜", 
                text: "ç¬¬10å¤©åœ£ç»å†…å®¹...", 
                ref: "å‡ºå¤„", 
                think: "ç¬¬10å¤©â€œä»Šæ—¥ç†è§£â€çš„å†…å®¹ã€‚", 
                prayer: "ç¬¬10å¤©â€œç¥·å‘ŠæŒ‡å¼•â€çš„å†…å®¹ã€‚" 
            }
        ];

        // --- è·å–å…ƒç´  ---
        const titleEl = document.getElementById('main-title');
        const timeEl = document.getElementById('beijing-time');
        const textEl = document.getElementById('bible-text');
        const refEl = document.getElementById('bible-ref');
        
        const modal = document.getElementById('modal');
        const modalTitle = document.getElementById('modal-title');
        const modalBody = document.getElementById('modal-body');
        const closeBtn = document.getElementsByClassName('close-btn')[0];

        const btnUnderstand = document.getElementById('btn-understand');
        const btnPrayer = document.getElementById('btn-prayer');
        const btnConnect = document.getElementById('btn-connect');
        
        let currentData = {};

        // --- åŠŸèƒ½å‡½æ•° ---

        // 1. æ›´æ–°åŒ—äº¬æ—¶é—´
        function updateBeijingTime() {
            const options = {
                timeZone: 'Asia/Shanghai', // åŒ—äº¬æ—¶é—´ (ä¸œå…«åŒº)
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false
            };
            const beijingTime = new Date().toLocaleString('zh-CN', options);
            timeEl.textContent = `åŒ—äº¬æ—¶é—´ ${beijingTime}`;
        }

        // 2. è·å–ä¸€å¹´ä¸­çš„ç¬¬å‡ å¤© (1-366)
        function getDayOfYear() {
            const now = new Date();
            const start = new Date(now.getFullYear(), 0, 0);
            const diff = now - start;
            const oneDay = 1000 * 60 * 60 * 24;
            const day = Math.floor(diff / oneDay);
            return day;
        }

        // 3. æ›´æ–°æ¯æ—¥å†…å®¹
        function updateDailyContent() {
            const dayOfYear = getDayOfYear();
            const dataIndex = (dayOfYear - 1) % dailyData.length;
            
            currentData = dailyData[dataIndex];

            titleEl.textContent = currentData.title;
            textEl.textContent = currentData.text;
            refEl.textContent = `â€”â€” ${currentData.ref}`;
        }

        /* --- ğŸš© æ”¹åŠ¨ 7: ä¿®æ”¹ openModal å‡½æ•° --- */
        // 4. æ‰“å¼€å¼¹çª—
        function openModal(type) {
            // å…ˆç§»é™¤å¯èƒ½å­˜åœ¨çš„ classï¼Œç¡®ä¿æ ·å¼é‡ç½®
            modalBody.classList.remove('connect-modal');

            if (type === 'understand') {
                modalTitle.textContent = 'ä»Šæ—¥ç†è§£';
                modalTitle.style.color = 'var(--color-understand)';
                modalBody.textContent = currentData.think;
            } else if (type === 'prayer') {
                modalTitle.textContent = 'ç¥·å‘ŠæŒ‡å¼•';
                modalTitle.style.color = 'var(--color-prayer)';
                modalBody.textContent = currentData.prayer;
            } else if (type === 'connect') {
                modalTitle.textContent = 'äº¤æµè”ç³»';
                modalTitle.style.color = 'var(--color-connect)';
                
                // æ·»åŠ  'connect-modal' ç±»æ¥ä¿®å¤é¡¶éƒ¨é—´è·
                modalBody.classList.add('connect-modal');
                
                // ä½¿ç”¨ 'connect-closing-line' ç±»æ¥è®¾ç½®ç»“å°¾æ–‡å­—æ ·å¼
                modalBody.innerHTML = `
                    <strong>é‚®ç®±:</strong> <a href="mailto:juvan0926@gmail.com">juvan0926@gmail.com</a>
                    <strong>å¾®ä¿¡:</strong> 18968860469
                    <strong>æ·˜å®:</strong> <a href="https://m.tb.cn/h.Sr7xvEYKyFQt6jo" target="_blank">ç‚¹å‡»è®¿é—®</a>
                    <strong>å°çº¢ä¹¦:</strong> <a href="https://xhslink.com/m/4AgROk2mC4" target="_blank">ç‚¹å‡»è®¿é—®</a>
                    <p class="connect-closing-line">æˆ‘ä»¬å¾ˆä¹æ„ä¸æ‚¨äº¤æµå’Œä»£ç¥·ï¼</p>
                `;
            }
            modal.style.display = 'block';
        }

        // 5. å…³é—­å¼¹çª—
        function closeModal() {
            modal.style.display = 'none';
            // ğŸš© (å¯é€‰) å…³é—­æ—¶ä¹Ÿç§»é™¤ï¼Œç¡®ä¿ä¸‡æ— ä¸€å¤±
            modalBody.classList.remove('connect-modal');
        }

        // --- äº‹ä»¶ç›‘å¬ ---
        btnUnderstand.addEventListener('click', () => openModal('understand'));
        btnPrayer.addEventListener('click', () => openModal('prayer'));
        btnConnect.addEventListener('click', () => openModal('connect'));

        closeBtn.addEventListener('click', closeModal);
        window.addEventListener('click', (event) => {
            if (event.target == modal) {
                closeModal();
            }
        });

        // --- é¡µé¢åˆå§‹åŒ– ---
        updateDailyContent();
        updateBeijingTime();
        // æ¯ç§’æ›´æ–°ä¸€æ¬¡æ—¶é—´
        setInterval(updateBeijingTime, 1000);

    </script>
</body>
</html>
